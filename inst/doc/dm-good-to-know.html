<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2020-03-04" />

<title>A brief introduction to relational data models</title>






<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">A brief introduction to relational data models</h1>
<h4 class="date">2020-03-04</h4>



<p>Multiple, linked tables are a common concept in database management. Since many R users have a background in other disciplines, we present six important terms in relational data modeling to jump-start working with {dm}.</p>
<div id="data-frames-and-tables" class="section level2">
<h2>1) Data frames and tables</h2>
<p>A <em>data frame</em> is a fundamental data structure in R. If you imagine it visually, the result is a typical table structure. That’s why working with data from spreadsheets is so convenient and the users of the the popular <a href="https://dplyr.tidyverse.org">{dplyr}</a> package for data wrangling mainly rely on data frames.</p>
<p>The disadvantage of data frames and flat file systems like spreadsheets is that they can result in bloated tables that repeat the same values multiple times. In the worst case scenario, you may have a data frame with many rows and columns but with only a single value different in each row.</p>
<p>This calls for a better data organization by utilizing the resemblance between data frames and database tables, which consist of columns and rows, too. The elements are just called differently:</p>
<table>
<thead>
<tr class="header">
<th>Data Frame</th>
<th>Table</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Column</td>
<td>Attribute</td>
</tr>
<tr class="even">
<td>Row</td>
<td>Tuple</td>
</tr>
</tbody>
</table>
<p>Therefore, the separation into multiple tables is a first step that helps data quality. But without an associated data model you don’t take full advantage. For example, joining is more complicated than it should be. This is illustrated <a href="#example">above</a>.</p>
<p>With {dm} you can have the best of both worlds: Manage your data as linked tables, then flatten multiple tables into one for your analysis with {dplyr} on an as-needed basis.</p>
</div>
<div id="model" class="section level2">
<h2>2) Model</h2>
<p>A <em>data model</em> shows the structure between multiple tables that can be linked together. The <code>nycflights13</code> relations can be transferred into the following graphical representation:</p>
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %0 Pages: 1 -->
<svg width="152pt" height="174pt" viewBox="0.00 0.00 152.00 174.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 170)">
<title>%0</title>
<g id="a_graph0"><a xlink:title="Data Model">
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-170 148,-170 148,4 -4,4"></polygon>
</a>
</g>
<!-- airlines -->
<g id="node1" class="node">
<title>airlines</title>
<polygon fill="#ed7d31" stroke="transparent" points="95,-141 95,-161 140,-161 140,-141 95,-141"></polygon>
<text text-anchor="start" x="96.8969" y="-146.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">airlines</text>
<polygon fill="#fbe5d5" stroke="transparent" points="95,-121 95,-141 140,-141 140,-121 95,-121"></polygon>
<text text-anchor="start" x="97" y="-127.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">carrier</text>
<polygon fill="none" stroke="#9e5320" points="93.5,-120 93.5,-162 140.5,-162 140.5,-120 93.5,-120"></polygon>
</g>
<!-- airports -->
<g id="node2" class="node">
<title>airports</title>
<polygon fill="#ed7d31" stroke="transparent" points="94,-21 94,-41 140,-41 140,-21 94,-21"></polygon>
<text text-anchor="start" x="95.6192" y="-26.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">airports</text>
<polygon fill="#fbe5d5" stroke="transparent" points="94,-1 94,-21 140,-21 140,-1 94,-1"></polygon>
<text text-anchor="start" x="96" y="-7.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">faa</text>
<polygon fill="none" stroke="#9e5320" points="93,0 93,-42 141,-42 141,0 93,0"></polygon>
</g>
<!-- flights -->
<g id="node3" class="node">
<title>flights</title>
<polygon fill="#5b9bd5" stroke="transparent" points="4,-91 4,-111 50,-111 50,-91 4,-91"></polygon>
<text text-anchor="start" x="9.1115" y="-96.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">flights</text>
<polygon fill="#deebf6" stroke="transparent" points="4,-71 4,-91 50,-91 50,-71 4,-71"></polygon>
<text text-anchor="start" x="6" y="-76.4" font-family="Times,serif" font-size="14.00" fill="#444444">carrier</text>
<polygon fill="#deebf6" stroke="transparent" points="4,-51 4,-71 50,-71 50,-51 4,-51"></polygon>
<text text-anchor="start" x="5.6115" y="-56.4" font-family="Times,serif" font-size="14.00" fill="#444444">tailnum</text>
<polygon fill="#deebf6" stroke="transparent" points="4,-31 4,-51 50,-51 50,-31 4,-31"></polygon>
<text text-anchor="start" x="6" y="-36.4" font-family="Times,serif" font-size="14.00" fill="#444444">origin</text>
<polygon fill="#deebf6" stroke="transparent" points="4,-11 4,-31 50,-31 50,-11 4,-11"></polygon>
<text text-anchor="start" x="6" y="-16.4" font-family="Times,serif" font-size="14.00" fill="#444444">dest</text>
<polygon fill="none" stroke="#3c678e" points="3,-10 3,-112 51,-112 51,-10 3,-10"></polygon>
</g>
<!-- flights&#45;&gt;airlines -->
<g id="edge1" class="edge">
<title>flights:carrier-&gt;airlines:carrier</title>
<path fill="none" stroke="#555555" d="M50,-81C75.9263,-81 68.2444,-118.6007 85.2435,-128.5884"></path>
<polygon fill="#555555" stroke="#555555" points="84.4523,-131.9981 95,-131 86.132,-125.2026 84.4523,-131.9981"></polygon>
</g>
<!-- flights&#45;&gt;airports -->
<g id="edge2" class="edge">
<title>flights:origin-&gt;airports:faa</title>
<path fill="none" stroke="#555555" d="M50,-41C69.6005,-41 70.6808,-20.4263 83.915,-13.354"></path>
<polygon fill="#555555" stroke="#555555" points="85.0574,-16.6816 94,-11 83.4662,-9.8648 85.0574,-16.6816"></polygon>
</g>
<!-- flights&#45;&gt;airports -->
<g id="edge3" class="edge">
<title>flights:dest-&gt;airports:faa</title>
<path fill="none" stroke="#555555" d="M50,-21C66.1374,-21 71.8091,-14.5248 83.8583,-11.9954"></path>
<polygon fill="#555555" stroke="#555555" points="84.3897,-15.4601 94,-11 83.7059,-8.4936 84.3897,-15.4601"></polygon>
</g>
<!-- planes -->
<g id="node4" class="node">
<title>planes</title>
<polygon fill="#ed7d31" stroke="transparent" points="94,-81 94,-101 140,-101 140,-81 94,-81"></polygon>
<text text-anchor="start" x="99.1178" y="-86.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">planes</text>
<polygon fill="#fbe5d5" stroke="transparent" points="94,-61 94,-81 140,-81 140,-61 94,-61"></polygon>
<text text-anchor="start" x="95.6115" y="-67.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">tailnum</text>
<polygon fill="none" stroke="#9e5320" points="93,-60 93,-102 141,-102 141,-60 93,-60"></polygon>
</g>
<!-- flights&#45;&gt;planes -->
<g id="edge4" class="edge">
<title>flights:tailnum-&gt;planes:tailnum</title>
<path fill="none" stroke="#555555" d="M50,-61C66.1374,-61 71.8091,-67.4752 83.8583,-70.0046"></path>
<polygon fill="#555555" stroke="#555555" points="83.7059,-73.5064 94,-71 84.3897,-66.5399 83.7059,-73.5064"></polygon>
</g>
<!-- weather -->
<g id="node5" class="node">
<title>weather</title>
<polygon fill="#70ad47" stroke="transparent" points="3,-138 3,-158 51,-158 51,-138 3,-138"></polygon>
<text text-anchor="start" x="4.8492" y="-143.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">weather</text>
<polygon fill="none" stroke="#4a732f" points="2,-137 2,-159 52,-159 52,-137 2,-137"></polygon>
</g>
</g>
</svg>

<p>The <code>flights</code> table is linked to three other tables: <code>airlines</code>, <code>planes</code> and <code>airports</code>. By using directed arrows, the visualization explicitly shows the connection between different columns/attributes. For example: The column <code>carrier</code> in <code>flights</code> can be joined with the column <code>carrier</code> from the <code>airlines</code> table. Further Reading: The {dm} methods for <a href="https://krlmlr.github.io/dm/articles/dm-visualization.html">visualizing data models</a>.</p>
<p>The links between the tables are established through <em>primary keys</em> and <em>foreign keys</em>.</p>
</div>
<div id="primary-keys" class="section level2">
<h2>3) Primary Keys</h2>
<p>In a relational data model, every table needs to have one column/attribute that uniquely identifies a row. This column is called a <em>primary key</em> (abbreviated with pk). The primary key column has unique values and can’t contain <code>NA</code> or <code>NULL</code> values. If no such column exists, it is common practice to create a synthetic column of numeric or globally unique identifiers (surrogate key).</p>
<p>In the <code>airlines</code> table of <code>nycflights13</code> the column <code>carrier</code> is the primary key.</p>
<p>Further Reading: The {dm} package offers several function for dealing with <a href="https://krlmlr.github.io/dm/articles/dm-class-and-basic-operations.html#pk">primary keys</a>.</p>
</div>
<div id="foreign-keys" class="section level2">
<h2>4) Foreign Keys</h2>
<p>The counterpart of a primary key in one table is the <em>foreign key</em> in another table. In order to join two tables, the primary key of the first table needs to be available in the second table, too. This second column is called the foreign key (abbreviated with fk).</p>
<p>For example, if you want to link the <code>airlines</code> table in the <code>nycflights13</code> data to the <code>flights</code> table, the primary key in the <code>airlines</code> table is <code>carrier</code> which is present as foreign key <code>carrier</code> in the <code>flights</code> table.</p>
<p>Further Reading: The {dm} functions for working with <a href="https://krlmlr.github.io/dm/articles/dm-class-and-basic-operations.html#foreign-keys">foreign keys</a>.</p>
</div>
<div id="normalization" class="section level2">
<h2>5) Normalization</h2>
<p>One main goal is to keep the data organization as clean and simple as possible by avoiding redundant data entries. <em>Normalization</em> is the technical term that describes this central design principle of a relational data model: splitting data into multiple tables. A normalized data schema consists of several relations (tables) that are linked with attributes (columns) with primary and foreign keys.</p>
<p>For example, if you want to change the name of one airport in <code>nycflights13</code>, you have to change only a single data entry. Sometimes, this principle is called “single point of truth”.</p>
<p>See the <a href="https://en.wikipedia.org/wiki/Database_normalisation">Wikipedia article on database normalization</a> for more details. Consider reviewing the <a href="https://simple.wikipedia.org/wiki/Database_normalisation">Simple English version</a> for a gentle introduction.</p>
</div>
<div id="relational-databases" class="section level2">
<h2>6) Relational Databases</h2>
<p><code>dm</code> is built upon relational data models but it is not a database itself. Databases are systems for data management and many of them are constructed as <em>relational databases</em>, e.g. SQLite, MySQL, MSSQL, Postgres. As you can guess from the names of the databases SQL, the <strong>s</strong>tructured <strong>q</strong>uerying <strong>l</strong>anguage plays an important role: It was invented for the purpose of querying relational databases.</p>
<p>Therefore, {dm} can copy data <a href="https://krlmlr.github.io/dm/articles/dm.html#copy">from and to databases</a>, and works transparently with both in-memory data and with relational database systems.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
